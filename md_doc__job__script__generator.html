<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>sLapH-contractions: Job_Script_Generator</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js", "simplewick.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">sLapH-contractions
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Job_Script_Generator </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Author: Martin Ueding</p>
<p>Date: 2018-05-18 </p><hr/>
<h1>Job Script Generator</h1>
<p>The contraction code is usually used with a single gauge configuration per computer job. This has the advantage that there are small work packets that can be distributed on all the nodes of a cluster. Creating a job script per configuration is tedious, therefore the contraction code ships with a job script generator.</p>
<p>The generator is written in Python 3 and uses the Jinja template library for creating files. It supports <code>qbig</code> and <code>jureca</code>.</p>
<p>At the time of writing, the help message is the following: </p><pre class="fragment">$ job-script-generator/generate-contraction-jobs -h
usage: generate-contraction-jobs [-h] [--ignore-checks]
                                 [--conf-skip CONF_SKIP [CONF_SKIP ...]]
                                 --machine {qbig,jureca} --rundir RUNDIR
                                 --outdir OUTDIR --exe EXE [--jobname JOBNAME]
                                 [--jobcount JOBCOUNT] [--email EMAIL]
                                 [--jobs-per-node JOBS_PER_NODE]
                                 [--cpus-per-task CPUS_PER_TASK]
                                 contractinput conf_start conf_end [conf_step]

Generates a hierarchy of input files and job scripts for the contraction code.
The script will also make sure that the referenced files actually exist such
that the jobs will have a higher chance of succeeding.

positional arguments:
  contractinput         Configuration file contract

optional arguments:
  -h, --help            show this help message and exit
  --ignore-checks       Do not run the tests for existence of input files.

Configuration:
  Options that are inherent for the underlying gauge configurations.

  conf_start            First configuration, inclusive
  conf_end              Last configuration, inclusive
  conf_step             default: 1
  --conf-skip CONF_SKIP [CONF_SKIP ...]
                        Skip the given gauge configurations.

Job:
  Options for the jobs to create.

  --machine {qbig,jureca}
                        Name of the machine the code shall be executed on
  --rundir RUNDIR       Base path for infiles.
  --outdir OUTDIR       Base path for output.
  --exe EXE             Path to the executable. This will be copied into the
                        hierarchy to prevent accidential overwrites.
  --jobname JOBNAME     Name of the submitted job. Default: contraction
  --jobcount JOBCOUNT   Maximal number of jobs submitted to the queue.
                        Default: 60
  --email EMAIL         Email address to send job notifications to. If this is
                        not given, no emails will be send.
  --jobs-per-node JOBS_PER_NODE
                        Number of configurations started in a job. Default: 1
  --cpus-per-task CPUS_PER_TASK
                        Number of cpu cores per task. Default: 4
</pre><p>You have to specify a base configuration file. This file needs to contain all the options like paths, quarks and operators used. The configuration number will be passed to the contraction code via the job script and needs not to be specified. It will be overwritten but for clarity it is best to just omit it in the configuration file.</p>
<p>Sample configuration files can be found in the directory <code>infiles</code> and the one from the integration test is located at <code>tests/integration-L4/test_all.ini</code>.</p>
<p>The job script generator will generate a directory hierarchy with one directory per gauge configuration. A <code>start_runs.sh</code> will also be created to put all jobs into the queue. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
